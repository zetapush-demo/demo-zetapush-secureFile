{"deploymentId":"macro_0","macros":[{"_type":"macro","description":"Get metadata","line":1,"steps":[{"_type":"call","description":"Get Stored Object","line":8,"deploymentId":"macro_1","verb":"func","parameter":{"parameters":{"id":{"__ref":"${id}"},"table":"ZetaPushMetadata","zpService":"cr_tls_gda"},"name":"core_utils__getStoredObject","hardFail":true},"resultName":"_sv3"},{"_type":"var","description":"Get Stored Object","line":8,"var":"revision","value":{"__ref":"${_sv3.result.revision}"}},{"_type":"var","description":"Get Stored Object","line":8,"var":"update","value":{"__ref":"${_sv3.result.update}"}},{"_type":"var","description":"Get Stored Object","line":8,"var":"value","value":{"__ref":"${_sv3.result.value}"}}],"name":"getMetadata","channel":"getMetadata","result":{"id":{"__ref":"${id}"},"value":{"__ref":"${value}"},"revision":{"__ref":"${revision}"},"update":{"__ref":"${update}"}},"source":"com.zetapush.core.utils|2.0.0:src/api/metadata/getMetadata.zms","params":[{"name":"id","constraints":[{"name":"NotNull"},{"name":"type","config":{"type":"string"}}]}],"broadcast":true},{"_type":"macro","description":"Remove metadata","line":1,"steps":[{"_type":"call","description":"Remove stored object","line":8,"deploymentId":"macro_1","verb":"func","parameter":{"parameters":{"id":{"__ref":"${id}"},"table":"ZetaPushMetadata","zpService":"cr_tls_gda"},"name":"core_utils__removeStoredObject","hardFail":true}}],"name":"removeMetadata","channel":"removeMetadata","result":{"id":{"__ref":"${id}"}},"source":"com.zetapush.core.utils|2.0.0:src/api/metadata/removeMetadata.zms","params":[{"name":"id","constraints":[{"name":"type","config":{"type":"string"}}]}],"broadcast":true},{"_type":"macro","description":"Set metadata","line":1,"steps":[{"_type":"call","description":"Store metadata","line":9,"deploymentId":"macro_1","verb":"func","parameter":{"parameters":{"id":{"__ref":"${id}"},"value":{"__ref":"${metadata}"},"table":"ZetaPushMetadata","zpService":"cr_tls_gda"},"name":"core_utils__setStoredObject","hardFail":true},"resultName":"_sv4"},{"_type":"var","description":"Store metadata","line":9,"var":"revision","value":{"__ref":"${_sv4.result.revision}"}},{"_type":"var","description":"Store metadata","line":9,"var":"update","value":{"__ref":"${_sv4.result.update}"}},{"_type":"var","description":"Store metadata","line":9,"var":"value","value":{"__ref":"${_sv4.result.value}"}}],"name":"setMetadata","channel":"setMetadata","result":{"id":{"__ref":"${id}"},"value":{"__ref":"${value}"},"revision":{"__ref":"${revision}"},"update":{"__ref":"${update}"}},"source":"com.zetapush.core.utils|2.0.0:src/api/metadata/setMetadata.zms","params":[{"name":"id","constraints":[{"name":"NotNull"},{"name":"type","config":{"type":"string"}}]},{"name":"metadata","constraints":[{"name":"NotNull"},{"name":"type","config":{"type":"map"}}]}],"broadcast":true},{"_type":"macro","description":"","line":1,"steps":[{"_type":"call","description":"Store tags","line":9,"deploymentId":"macro_1","verb":"func","parameter":{"parameters":{"id":{"__ref":"${id}"},"value":{"__ref":"${usr:reduce_array_to_map('reduce_array_to_map',tags)}"},"table":"ZetaPushTags","zpService":"cr_tls_gda"},"name":"core_utils__setStoredObject","hardFail":true},"resultName":"_sv5"},{"_type":"var","description":"Store tags","line":9,"var":"revision","value":{"__ref":"${_sv5.result.revision}"}},{"_type":"var","description":"Store tags","line":9,"var":"update","value":{"__ref":"${_sv5.result.update}"}},{"_type":"var","description":"Store tags","line":9,"var":"value","value":{"__ref":"${_sv5.result.value}"}},{"_type":"var","description":"Destructure result properties","line":13,"var":"value","value":{"__ref":"${usr:reduce_map_to_array('reduce_map_to_array',value)}"}}],"name":"setTags","channel":"setTags","result":{"id":{"__ref":"${id}"},"value":{"__ref":"${value}"},"revision":{"__ref":"${revision}"},"update":{"__ref":"${update}"}},"source":"com.zetapush.core.utils|2.0.0:src/api/tags/setTags.zms","params":[{"name":"id","constraints":[{"name":"NotNull"},{"name":"type","config":{"type":"string"}}]},{"name":"tags","constraints":[{"name":"NotNull"},{"name":"type","config":{"type":"array"}}]}],"broadcast":true},{"_type":"macro","description":"Remove tags","line":1,"steps":[{"_type":"call","description":"Remove stored object","line":8,"deploymentId":"macro_1","verb":"func","parameter":{"parameters":{"id":{"__ref":"${id}"},"table":"ZetaPushTags","zpService":"cr_tls_gda"},"name":"core_utils__removeStoredObject","hardFail":true}}],"name":"removeTags","channel":"removeTags","result":{"id":{"__ref":"${id}"}},"source":"com.zetapush.core.utils|2.0.0:src/api/tags/removeTags.zms","params":[{"name":"id","constraints":[{"name":"type","config":{"type":"string"}}]}],"broadcast":true},{"_type":"macro","description":"","line":1,"steps":[{"_type":"call","description":"Get Stored Object","line":8,"deploymentId":"macro_1","verb":"func","parameter":{"parameters":{"id":{"__ref":"${id}"},"table":"ZetaPushTags","zpService":"cr_tls_gda"},"name":"core_utils__getStoredObject","hardFail":true},"resultName":"_sv6"},{"_type":"var","description":"Get Stored Object","line":8,"var":"revision","value":{"__ref":"${_sv6.result.revision}"}},{"_type":"var","description":"Get Stored Object","line":8,"var":"update","value":{"__ref":"${_sv6.result.update}"}},{"_type":"var","description":"Get Stored Object","line":8,"var":"value","value":{"__ref":"${_sv6.result.value}"}},{"_type":"var","description":"Destructure result properties","line":12,"var":"value","value":{"__ref":"${usr:reduce_map_to_array('reduce_map_to_array',value)}"}}],"name":"getTags","channel":"getTags","result":{"id":{"__ref":"${id}"},"value":{"__ref":"${value}"},"revision":{"__ref":"${revision}"},"update":{"__ref":"${update}"}},"source":"com.zetapush.core.utils|2.0.0:src/api/tags/getTags.zms","params":[{"name":"id","constraints":[{"name":"NotNull"},{"name":"type","config":{"type":"string"}}]}],"broadcast":true},{"_type":"macro","description":"Remove tags","line":1,"steps":[{"_type":"call","description":"Remove stored object","line":8,"deploymentId":"macro_1","verb":"func","parameter":{"parameters":{"id":{"__ref":"${id}"},"table":"ZetaPushTargets","zpService":"cr_tls_gda"},"name":"core_utils__removeStoredObject","hardFail":true}}],"name":"removeTargets","channel":"removeTargets","result":{"id":{"__ref":"${id}"}},"source":"com.zetapush.core.utils|2.0.0:src/api/targets/removeTargets.zms","params":[{"name":"id","constraints":[{"name":"type","config":{"type":"string"}}]}],"broadcast":true},{"_type":"macro","description":"","line":1,"steps":[{"_type":"call","description":"Get Stored Object","line":8,"deploymentId":"macro_1","verb":"func","parameter":{"parameters":{"id":{"__ref":"${id}"},"table":"ZetaPushTargets","zpService":"cr_tls_gda"},"name":"core_utils__getStoredObject","hardFail":true},"resultName":"_sv7"},{"_type":"var","description":"Get Stored Object","line":8,"var":"revision","value":{"__ref":"${_sv7.result.revision}"}},{"_type":"var","description":"Get Stored Object","line":8,"var":"update","value":{"__ref":"${_sv7.result.update}"}},{"_type":"var","description":"Get Stored Object","line":8,"var":"value","value":{"__ref":"${_sv7.result.value}"}},{"_type":"var","description":"Destructure result properties","line":12,"var":"value","value":{"__ref":"${usr:reduce_map_to_array('reduce_map_to_array',value)}"}}],"name":"getTargets","channel":"getTargets","result":{"id":{"__ref":"${id}"},"value":{"__ref":"${value}"},"revision":{"__ref":"${revision}"},"update":{"__ref":"${update}"}},"source":"com.zetapush.core.utils|2.0.0:src/api/targets/getTargets.zms","params":[{"name":"id","constraints":[{"name":"NotNull"},{"name":"type","config":{"type":"string"}}]}],"broadcast":true},{"_type":"macro","description":"","line":1,"steps":[{"_type":"log","description":" trace","line":8,"data":["setTargets",{"__ref":"${__userKey}"},{"__ref":"${id}"},{"__ref":"${targets}"}]},{"_type":"call","description":"Store tags","line":10,"deploymentId":"macro_1","verb":"func","parameter":{"parameters":{"id":{"__ref":"${id}"},"value":{"__ref":"${usr:reduce_array_to_map('reduce_array_to_map',targets)}"},"table":"ZetaPushTargets","zpService":"cr_tls_gda"},"name":"core_utils__setStoredObject","hardFail":true},"resultName":"_sv8"},{"_type":"var","description":"Store tags","line":10,"var":"revision","value":{"__ref":"${_sv8.result.revision}"}},{"_type":"var","description":"Store tags","line":10,"var":"update","value":{"__ref":"${_sv8.result.update}"}},{"_type":"var","description":"Store tags","line":10,"var":"value","value":{"__ref":"${_sv8.result.value}"}},{"_type":"var","description":"Destructure result properties","line":14,"var":"value","value":{"__ref":"${usr:reduce_map_to_array('reduce_map_to_array',value)}"}}],"name":"setTargets","channel":"setTargets","result":{"id":{"__ref":"${id}"},"value":{"__ref":"${value}"},"revision":{"__ref":"${revision}"},"update":{"__ref":"${update}"}},"source":"com.zetapush.core.utils|2.0.0:src/api/targets/setTargets.zms","params":[{"name":"id","constraints":[{"name":"NotNull"},{"name":"type","config":{"type":"string"}}]},{"name":"targets","constraints":[{"name":"NotNull"},{"name":"type","config":{"type":"array"}}]}],"broadcast":true},{"_type":"macro","description":"<p>\n\tRequest the stack service list with optional pagination.\n\tIf pagination is provided, it will determine if there is another available page.\n\t</p>\n\t\n\tThe response must be unwrapped:\n\t<ul>\n\t<li>call response.result.response.result to get the stack result</li>\n\t<li>call response.result.response.request to get original stack request</li>\n\t<li>call response.result.response.result.content to get stack list</li>\n\t<li>call response.result.response.result.page to get result pagination</li>\n\t</ul>\n\t\n\tThe result pagination object will have the following properties:\n\t<ul>\n\t<li>{pageSize}: the result page size (like usually) </li>\n\t<li>{pageNumber}: the result page number (like usually) </li>\n\t<li>{direction}: the result order direction (like usually) </li>\n\t<li><b>{hasNext}</b>: true to indicate if there is one more page available, false otherwise</li>\n\t</ul>\n\t\n\t<p>\n\tIf no pagination is provided, all the elements are loaded so {hasNext} is always false.\n\t</p>\n\t\n\t\n\tExemple of use:\n\t<pre>\n\t\tvar response = call zpRecipeUtils::paginatedStackList({\n\t\t\tstackService: zpServiceStack,\n\t\t\tstack: 'foo',\n\t\t\towner: 'toto',\n\t\t\tpage: { pageSize: 20, pageNumber: 0 }\n\t\t}) hardFail;\n\t\t// unwrap the response\n\t\tvar unwrappedResponse = response.result;\n\t\tfor item in unwrappedResponse.result.content {\n\t\t\ttrace(item);\n\t\t}\n\t\tvar hasNextPage = unwrappedResponse.result.page.hasNext;\n\t</pre>","line":2,"steps":[{"_type":"call","description":" Call api stack.list","line":66,"deploymentId":"ref://stackService","verb":"list","parameter":{"stack":{"__ref":"${stack}"},"owner":{"__ref":"${owner}"},"page":{"__ref":"${page}"}},"resultName":"response"},{"_type":"var","description":" hasNextPage =","line":67,"var":"hasNextPage","value":false},{"_type":"test","description":" if","line":68,"steps":[{"_type":"test","description":" if","line":73,"steps":[{"_type":"call","description":" Call api stack.list","line":75,"deploymentId":"ref://stackService","verb":"list","parameter":{"stack":{"__ref":"${stack}"},"owner":{"__ref":"${owner}"},"page":{"__ref":"${usr:computePageForHasNext('computePageForHasNext',page)}"}},"resultName":"moreResponse"},{"_type":"var","description":" hasNextPage =","line":76,"var":"hasNextPage","value":{"__ref":"${(coll:size(moreResponse.result.content) > 0)}"}}],"condition":"${(coll:size(response.result.content) >= page.pageSize)}"}],"condition":"${(page != null)}"},{"_type":"var","description":"Destructure result properties","line":80,"var":"request","value":{"__ref":"${response.request}"}},{"_type":"var","description":" result =","line":81,"var":"result","value":{"__ref":"${usr:formatPaginatedResult('formatPaginatedResult',response.result,hasNextPage)}"}}],"name":"paginatedStackList","channel":"paginatedStackList","result":{"request":{"__ref":"${request}"},"result":{"__ref":"${result}"}},"source":"com.zetapush.core.utils|2.0.0:src/api/utils/pagination.zms","params":[{"name":"stackService","constraints":[{"name":"service","config":{"service":"stack"}}]},{"name":"stack","constraints":[{"name":"type","config":{"type":"string"}}]},{"name":"owner","constraints":[{"name":"type","config":{"type":"string"}},{"name":"__default","config":{"__default":null}}]},{"name":"page","constraints":[{"name":"type","config":{"type":"object"}},{"name":"__default","config":{"__default":null}}]}],"broadcast":true},{"_type":"macro","description":"<p>\n\tRequest the gda service list with optional pagination.\n\tIf pagination is provided, it will determine if there is another available page.\n\t</p>\n\t\n\tThe response must be unwrapped:\n\t<ul>\n\t<li>call response.result.response.result to get the stack result</li>\n\t<li>call response.result.response.request to get original stack request</li>\n\t<li>call response.result.response.result.content to get stack list</li>\n\t<li>call response.result.response.result.page to get result pagination</li>\n\t</ul>\n\t\n\tThe result pagination object will have the following properties:\n\t<ul>\n\t<li>{pageSize}: the result page size (like usually) </li>\n\t<li>{pageNumber}: the result page number (like usually) </li>\n\t<li>{direction}: the result order direction (like usually) </li>\n\t<li><b>{hasNext}</b>: true to indicate if there is one more page available, false otherwise</li>\n\t</ul>\n\t\n\t<p>\n\tIf no pagination is provided, all the elements are loaded so {hasNext} is always false.\n\t</p>\n\t\n\tExemple of use:\n\t<pre>\n\t\tvar response = call zpRecipeUtils::paginatedGdaList({\n\t\t\tgdaService: zpServiceGda,\n\t\t\ttable: 'foo',\n\t\t\towner: 'toto',\n\t\t\tpage: { pageSize: 20, pageNumber: 0 }\n\t\t}) hardFail;\n\t\t// unwrap the response\n\t\tvar unwrappedResponse = response.result;\n\t\tfor item in unwrappedResponse.result.content {\n\t\t\ttrace(item);\n\t\t}\n\t\tvar hasNextPage = unwrappedResponse.result.page.hasNext;\n\t</pre>","line":86,"steps":[{"_type":"call","description":" Call api gda.list","line":151,"deploymentId":"ref://gdaService","verb":"list","parameter":{"table":{"__ref":"${table}"},"columns":{"__ref":"${columns}"},"owner":{"__ref":"${owner}"},"page":{"__ref":"${page}"}},"resultName":"response"},{"_type":"var","description":" hasNextPage =","line":152,"var":"hasNextPage","value":false},{"_type":"test","description":" if","line":153,"steps":[{"_type":"test","description":" if","line":158,"steps":[{"_type":"call","description":" Call api gda.list","line":160,"deploymentId":"ref://gdaService","verb":"list","parameter":{"table":{"__ref":"${table}"},"columns":{"__ref":"${columns}"},"owner":{"__ref":"${owner}"},"page":{"__ref":"${usr:computePageForHasNext('computePageForHasNext',page)}"}},"resultName":"moreResponse"},{"_type":"var","description":" hasNextPage =","line":161,"var":"hasNextPage","value":{"__ref":"${(coll:size(moreResponse.result.content) > 0)}"}}],"condition":"${(coll:size(response.result.content) >= page.pageSize)}"}],"condition":"${(page != null)}"},{"_type":"var","description":"Destructure result properties","line":165,"var":"request","value":{"__ref":"${response.request}"}},{"_type":"var","description":" result =","line":166,"var":"result","value":{"__ref":"${usr:formatPaginatedResult('formatPaginatedResult',response.result,hasNextPage)}"}}],"name":"paginatedGdaList","channel":"paginatedGdaList","result":{"request":{"__ref":"${request}"},"result":{"__ref":"${result}"}},"source":"com.zetapush.core.utils|2.0.0:src/api/utils/pagination.zms","params":[{"name":"gdaService","constraints":[{"name":"service","config":{"service":"gda"}}]},{"name":"table","constraints":[{"name":"type","config":{"type":"string"}}]},{"name":"columns","constraints":[{"name":"type","config":{"type":"object"}},{"name":"__default","config":{"__default":null}}]},{"name":"owner","constraints":[{"name":"type","config":{"type":"string"}},{"name":"__default","config":{"__default":null}}]},{"name":"page","constraints":[{"name":"type","config":{"type":"object"}},{"name":"__default","config":{"__default":null}}]}],"broadcast":true},{"_type":"macro","description":"","line":1,"steps":[{"_type":"var","description":"Manage default parameters","line":9,"var":"owner","value":{"__ref":"${obj:elvis('${owner}', '${__userKey}')}"}},{"_type":"log","description":" trace","line":10,"data":["deleteFileEntry",{"__ref":"${path}"},{"__ref":"${owner}"}]},{"_type":"call","description":"Remove file","line":12,"deploymentId":"cr_fl_hdfs","verb":"rm","parameter":{"path":{"__ref":"${path}"},"owner":{"__ref":"${owner}"}}}],"name":"deleteFileEntry","channel":"deleteFileEntry","result":{"path":{"__ref":"${path}"},"owner":{"__ref":"${owner}"}},"source":"com.zetapush.core.file|2.0.0:src/api/upload/deleteFileEntry.zms","params":[{"name":"path","constraints":[{"name":"NotNull"},{"name":"type","config":{"type":"string"}}]},{"name":"owner","constraints":[{"name":"type","config":{"type":"string"}}]}],"broadcast":true},{"_type":"macro","description":"","line":1,"steps":[{"_type":"var","description":"Manage default parameters","line":9,"var":"owner","value":{"__ref":"${obj:elvis('${owner}', '${__userKey}')}"}},{"_type":"log","description":" trace","line":10,"data":["getFileEntryList",{"__ref":"${folder}"},{"__ref":"${owner}"}]},{"_type":"call","description":"Get file upload list","line":12,"deploymentId":"macro_1","verb":"func","parameter":{"parameters":{"folder":{"__ref":"${folder}"},"owner":{"__ref":"${owner}"},"zpService":"cr_fl_hdfs"},"name":"core_file__getFileEntryListByService","hardFail":true},"resultName":"_sv14"},{"_type":"var","description":"Get file upload list","line":12,"var":"exists","value":{"__ref":"${_sv14.result.exists}"}},{"_type":"var","description":"Get file upload list","line":12,"var":"entries","value":{"__ref":"${_sv14.result.entries}"}}],"name":"getFileEntryList","channel":"getFileEntryList","result":{"exists":{"__ref":"${exists}"},"folder":{"__ref":"${folder}"},"entries":{"__ref":"${entries}"},"owner":{"__ref":"${owner}"}},"source":"com.zetapush.core.file|2.0.0:src/api/upload/getFileEntryList.zms","params":[{"name":"folder","constraints":[{"name":"NotNull"},{"name":"type","config":{"type":"string"}}]},{"name":"owner","constraints":[{"name":"type","config":{"type":"string"}}]}]},{"_type":"macro","description":"","line":1,"steps":[{"_type":"var","description":"Manage default parameters","line":9,"var":"owner","value":{"__ref":"${obj:elvis('${owner}', '${__userKey}')}"}},{"_type":"log","description":" trace","line":10,"data":["getFileEntry",{"__ref":"${path}"}]},{"_type":"call","description":"Get file upload","line":12,"deploymentId":"macro_1","verb":"func","parameter":{"parameters":{"path":{"__ref":"${path}"},"owner":{"__ref":"${owner}"},"zpService":"cr_fl_hdfs"},"name":"core_file__getFileEntryByService","hardFail":true},"resultName":"_sv15"},{"_type":"var","description":"Get file upload","line":12,"var":"exists","value":{"__ref":"${_sv15.result.exists}"}},{"_type":"var","description":"Get file upload","line":12,"var":"entry","value":{"__ref":"${_sv15.result.entry}"}}],"name":"getFileEntry","channel":"getFileEntry","result":{"exists":{"__ref":"${exists}"},"entry":{"__ref":"${entry}"},"owner":{"__ref":"${owner}"}},"source":"com.zetapush.core.file|2.0.0:src/api/upload/getFileEntry.zms","params":[{"name":"path","constraints":[{"name":"NotNull"},{"name":"type","config":{"type":"string"}}]},{"name":"owner","constraints":[{"name":"type","config":{"type":"string"}}]}]},{"_type":"macro","description":"","line":1,"steps":[{"_type":"var","description":"Manage default parameters","line":12,"var":"owner","value":{"__ref":"${obj:elvis('${owner}', '${__userKey}')}"}},{"_type":"log","description":" trace","line":13,"data":["confirmFileUpload",{"__ref":"${guid}"},{"__ref":"${owner}"},{"__ref":"${actions}"},{"__ref":"${metadata}"},{"__ref":"${tags}"}]},{"_type":"log","description":" trace","line":15,"data":["grant",{"__ref":"${str:join(':','cr_fl_hdfs',owner,guid)}"}]},{"_type":"call","description":"Confirm file upload","line":18,"deploymentId":"macro_1","verb":"func","parameter":{"parameters":{"guid":{"__ref":"${guid}"},"owner":{"__ref":"${owner}"},"actions":{"__ref":"${actions}"},"metadata":{"__ref":"${metadata}"},"tags":{"__ref":"${tags}"},"zpService":"cr_fl_hdfs"},"name":"core_file__confirmFileUploadByService","hardFail":true},"resultName":"_sv16"},{"_type":"var","description":"Confirm file upload","line":18,"var":"type","value":{"__ref":"${_sv16.result.type}"}},{"_type":"var","description":"Confirm file upload","line":18,"var":"name","value":{"__ref":"${_sv16.result.name}"}},{"_type":"var","description":"Confirm file upload","line":18,"var":"creation","value":{"__ref":"${_sv16.result.creation}"}},{"_type":"var","description":"Confirm file upload","line":18,"var":"url","value":{"__ref":"${_sv16.result.url}"}}],"name":"confirmFileUpload","channel":"confirmFileUpload","result":{"tags":{"__ref":"${tags}"},"type":{"__ref":"${type}"},"name":{"__ref":"${name}"},"metadata":{"__ref":"${metadata}"},"creation":{"__ref":"${creation}"},"url":{"__ref":"${url}"},"owner":{"__ref":"${owner}"}},"source":"com.zetapush.core.file|2.0.0:src/api/upload/confirmFileUpload.zms","params":[{"name":"guid","constraints":[{"name":"NotNull"},{"name":"type","config":{"type":"string"}}]},{"name":"owner","constraints":[{"name":"type","config":{"type":"string"}}]},{"name":"actions","constraints":[{"name":"type","config":{"type":"map"}},{"name":"__default","config":{"__default":{}}}]},{"name":"metadata","constraints":[{"name":"type","config":{"type":"map"}},{"name":"__default","config":{"__default":{}}}]},{"name":"tags","constraints":[{"name":"type","config":{"type":"array"}},{"name":"__default","config":{"__default":[]}}]}],"broadcast":true},{"_type":"macro","description":"","line":1,"steps":[{"_type":"var","description":"Manage default parameters","line":10,"var":"owner","value":{"__ref":"${obj:elvis('${owner}', '${__userKey}')}"}},{"_type":"log","description":" trace","line":11,"data":["requestFileUpload",{"__ref":"${contentType}"},{"__ref":"${folder}"},{"__ref":"${owner}"}]},{"_type":"call","description":"Request file upload","line":13,"deploymentId":"macro_1","verb":"func","parameter":{"parameters":{"contentType":{"__ref":"${contentType}"},"folder":{"__ref":"${folder}"},"owner":{"__ref":"${owner}"},"zpService":"cr_fl_hdfs"},"name":"core_file__requestFileUploadByService","hardFail":true},"resultName":"_sv17"},{"_type":"var","description":"Request file upload","line":13,"var":"httpMethod","value":{"__ref":"${_sv17.result.httpMethod}"}},{"_type":"var","description":"Request file upload","line":13,"var":"guid","value":{"__ref":"${_sv17.result.guid}"}},{"_type":"var","description":"Request file upload","line":13,"var":"url","value":{"__ref":"${_sv17.result.url}"}}],"name":"requestFileUpload","channel":"requestFileUpload","result":{"httpMethod":{"__ref":"${httpMethod}"},"guid":{"__ref":"${guid}"},"url":{"__ref":"${url}"},"owner":{"__ref":"${owner}"}},"source":"com.zetapush.core.file|2.0.0:src/api/upload/requestFileUpload.zms","params":[{"name":"contentType","constraints":[{"name":"NotNull"},{"name":"type","config":{"type":"string"}}]},{"name":"folder","constraints":[{"name":"NotNull"},{"name":"type","config":{"type":"string"}}]},{"name":"owner","constraints":[{"name":"type","config":{"type":"string"}}]}],"broadcast":true},{"_type":"macro","description":"Macroscript called to get the anchor Id","line":1,"steps":[{"_type":"call","description":" Call api gda.get","line":3,"deploymentId":"gda_0","verb":"get","parameter":{"table":"anchorIds","key":{"__ref":"${name}"}},"resultName":"request"},{"_type":"var","description":" id =","line":4,"var":"id","value":{"__ref":"${request.result.id}"}}],"name":"getAnchorId","channel":"getAnchorId","result":{"id":{"__ref":"${id}"}},"source":"com.zetapush.tuto.upload|1.0.0:src/database.zms","params":[{"name":"name","constraints":[{"name":"type","config":{"type":"string"}}]}],"broadcast":true},{"_type":"macro","description":"Macroscript to add a new couple anchorId / file","line":8,"steps":[{"_type":"call","description":" Call api gda.put","line":10,"deploymentId":"gda_0","verb":"put","parameter":{"table":"anchorIds","data":{"__ref":"${anchorId}"},"key":{"__ref":"${name}"},"column":"id"}}],"name":"addNewAnchorId","channel":"addNewAnchorId","result":{"name":{"__ref":"${name}"},"anchorId":{"__ref":"${anchorId}"}},"source":"com.zetapush.tuto.upload|1.0.0:src/database.zms","params":[{"name":"name","constraints":[{"name":"type","config":{"type":"string"}}]},{"name":"anchorId","constraints":[{"name":"type","config":{"type":"string"}}]}]},{"_type":"macro","description":"Macroscript to delete a couple anchorId / file","line":13,"steps":[{"_type":"call","description":" Call api gda.removeRow","line":15,"deploymentId":"gda_0","verb":"removeRow","parameter":{"table":"anchorIds","key":{"__ref":"${name}"}}}],"name":"removeAnchorId","channel":"completed","source":"com.zetapush.tuto.upload|1.0.0:src/database.zms","params":[{"name":"name","constraints":[{"name":"type","config":{"type":"string"}}]}]},{"_type":"macro","description":"List existing public Anchors","line":1,"steps":[{"_type":"var","description":" HttpClientHeader =","line":6,"var":"HttpClientHeader","value":[{"name":"Authorization","value":"Basic bW9ydmFuQHpldGFwdXNoLmNvbTp6ZXRhcHVzaFdvbGVldA=="}]},{"_type":"call","description":" Call api httpclient.request","line":8,"deploymentId":"httpclient_0","verb":"request","parameter":{"headers":{"__ref":"${HttpClientHeader}"},"method":"GET","parseMode":"OBJECT","url":"https://api-preprod.woleet.io/v1/anchors"},"resultName":"response"}],"name":"listAnchors","channel":"listAnchors","result":{"content":{"__ref":"${response.content}"}},"source":"com.zetapush.tuto.upload|1.0.0:src/api.zms"},{"_type":"macro","description":"Create a new Anchor","line":13,"steps":[{"_type":"var","description":" HttpClientHeader =","line":20,"var":"HttpClientHeader","value":[{"name":"Authorization","value":"Basic bW9ydmFuQHpldGFwdXNoLmNvbTp6ZXRhcHVzaFdvbGVldA=="},{"name":"Accept","value":"application/json"},{"name":"Content-type","value":"application/json"}]},{"_type":"var","description":" newAnchor =","line":23,"var":"newAnchor","value":{"__ref":"${anchor}"}},{"_type":"exec","description":" newAnchor = ","line":24,"exec":"${obj:assign(newAnchor,'callbackURL','http://hq.zpush.io:9082/str/rest/deployed/3iflLHjD/macro_0/macro/exec/callbackreceipt')}"},{"_type":"call","description":" Call api httpclient.request","line":26,"deploymentId":"httpclient_0","verb":"request","parameter":{"headers":{"__ref":"${HttpClientHeader}"},"content":{"__ref":"${newAnchor}"},"method":"POST","parseMode":"OBJECT","url":"https://api-preprod.woleet.io/v1/anchor"},"resultName":"response"},{"_type":"call","description":" Call api gda.put","line":31,"deploymentId":"gda_0","verb":"put","parameter":{"table":"userkey","data":{"__ref":"${__userKey}"},"key":{"__ref":"${response.content.id}"},"column":"key"},"suKey":"GLOBAL"}],"name":"createAnchor","channel":"createAnchor","result":{"response":{"__ref":"${response}"}},"source":"com.zetapush.tuto.upload|1.0.0:src/api.zms","params":[{"name":"anchor","constraints":[{"name":"NotNull"},{"name":"type","config":{"type":"com.zetapush.tuto.upload.anchor"}}]}]},{"_type":"macro","description":"update an anchor by its id","line":36,"steps":[{"_type":"var","description":" HttpClientHeader =","line":43,"var":"HttpClientHeader","value":[{"name":"Authorization","value":"Basic bW9ydmFuQHpldGFwdXNoLmNvbTp6ZXRhcHVzaFdvbGVldA=="},{"name":"Accept","value":"application/json"},{"name":"Content-type","value":"application/json"}]},{"_type":"call","description":" Call api httpclient.request","line":45,"deploymentId":"httpclient_0","verb":"request","parameter":{"headers":{"__ref":"${HttpClientHeader}"},"content":{"__ref":"${anchor}"},"method":"PUT","parseMode":"OBJECT","url":{"__ref":"${obj:sum('https://api-preprod.woleet.io/v1/anchor/', anchorId)}"}},"resultName":"response"}],"name":"updateAnchor","channel":"updateAnchor","result":{"response":{"__ref":"${response}"}},"source":"com.zetapush.tuto.upload|1.0.0:src/api.zms","params":[{"name":"anchorId","constraints":[{"name":"NotNull"},{"name":"type","config":{"type":"string"}}]},{"name":"anchor","constraints":[{"name":"NotNull"},{"name":"type","config":{"type":"com.zetapush.tuto.upload.anchor"}}]}]},{"_type":"macro","description":"delete an anchor by its id","line":50,"steps":[{"_type":"var","description":" HttpClientHeader =","line":56,"var":"HttpClientHeader","value":[{"name":"Authorization","value":"Basic bW9ydmFuQHpldGFwdXNoLmNvbTp6ZXRhcHVzaFdvbGVldA=="}]},{"_type":"call","description":" Call api httpclient.request","line":58,"deploymentId":"httpclient_0","verb":"request","parameter":{"headers":{"__ref":"${HttpClientHeader}"},"method":"DELETE","parseMode":"OBJECT","url":{"__ref":"${obj:sum('https://api-preprod.woleet.io/v1/anchor/', anchorId)}"}},"resultName":"response"}],"name":"deleteAnchor","channel":"deleteAnchor","result":{"response":{"__ref":"${response}"}},"source":"com.zetapush.tuto.upload|1.0.0:src/api.zms","params":[{"name":"anchorId","constraints":[{"name":"NotNull"},{"name":"type","config":{"type":"string"}}]}]},{"_type":"macro","description":"get an anchor by its id","line":63,"steps":[{"_type":"var","description":" HttpClientHeader =","line":69,"var":"HttpClientHeader","value":[{"name":"Authorization","value":"Basic bW9ydmFuQHpldGFwdXNoLmNvbTp6ZXRhcHVzaFdvbGVldA=="}]},{"_type":"call","description":" Call api httpclient.request","line":71,"deploymentId":"httpclient_0","verb":"request","parameter":{"headers":{"__ref":"${HttpClientHeader}"},"method":"GET","parseMode":"OBJECT","url":{"__ref":"${obj:sum('https://api-preprod.woleet.io/v1/anchor/', anchorId)}"}},"resultName":"response"}],"name":"getAnchor","channel":"getAnchor","result":{"content":{"__ref":"${response.content}"}},"source":"com.zetapush.tuto.upload|1.0.0:src/api.zms","params":[{"name":"anchorId","constraints":[{"name":"NotNull"},{"name":"type","config":{"type":"string"}}]}]},{"_type":"macro","description":"get a receipt by an anchor id","line":76,"steps":[{"_type":"var","description":" HttpClientHeader =","line":82,"var":"HttpClientHeader","value":[{"name":"Authorization","value":"Basic bW9ydmFuQHpldGFwdXNoLmNvbTp6ZXRhcHVzaFdvbGVldA=="}]},{"_type":"call","description":" Call api httpclient.request","line":84,"deploymentId":"httpclient_0","verb":"request","parameter":{"headers":{"__ref":"${HttpClientHeader}"},"method":"GET","parseMode":"OBJECT","url":{"__ref":"${obj:sum('https://api-preprod.woleet.io/v1/receipt/', anchorId)}"}},"resultName":"response"}],"name":"getReceipt","channel":"getReceipt","result":{"content":{"__ref":"${response.content}"}},"source":"com.zetapush.tuto.upload|1.0.0:src/api.zms","params":[{"name":"anchorId","constraints":[{"name":"NotNull"},{"name":"type","config":{"type":"string"}}]}]},{"_type":"macro","description":"update an anchor by its id","line":89,"steps":[{"_type":"var","description":" HttpClientHeader =","line":96,"var":"HttpClientHeader","value":[{"name":"Authorization","value":"Basic bW9ydmFuQHpldGFwdXNoLmNvbTp6ZXRhcHVzaFdvbGVldA=="},{"name":"Accept","value":"application/json"},{"name":"Content-type","value":"application/json"}]},{"_type":"call","description":" Call api httpclient.request","line":98,"deploymentId":"httpclient_0","verb":"request","parameter":{"headers":{"__ref":"${HttpClientHeader}"},"content":{"__ref":"${receipt}"},"method":"POST","parseMode":"OBJECT","url":"https://api-preprod.woleet.io/v1/receipt/verify"},"resultName":"response"}],"name":"verifyReceipt","channel":"verifyReceipt","result":{"response":{"__ref":"${response}"}},"source":"com.zetapush.tuto.upload|1.0.0:src/api.zms","params":[{"name":"receipt","constraints":[{"name":"NotNull"},{"name":"type","config":{"type":"com.zetapush.tuto.upload.receipt"}}]}]},{"_type":"macro","description":"called by Woleet when a receipt is ready","line":104,"steps":[{"_type":"call","description":" Call api gda.get","line":111,"deploymentId":"gda_0","verb":"get","parameter":{"table":"userkey","key":{"__ref":"${anchor.id}"}},"resultName":"request","suKey":"GLOBAL"},{"_type":"var","description":" destinataire =","line":112,"var":"destinataire","value":{"__ref":"${request.result.key}"}},{"_type":"call","description":" Call macro updateStatus","line":114,"deploymentId":"macro_0","verb":"func","parameter":{"parameters":{"path":{"__ref":"${anchor.name}"},"value":{"__ref":"${anchor.status}"}},"name":"updateStatus"},"suKey":"ref://destinataire"},{"_type":"call","description":" Call macro dispatch","line":116,"deploymentId":"macro_0","verb":"func","parameter":{"parameters":{"anchor":{"__ref":"${anchor}"}},"name":"dispatch","hardFail":true},"loud":true,"suKey":"ref://destinataire"}],"name":"callbackReceipt","channel":"callbackReceipt","result":{"anchor":{"__ref":"${anchor}"}},"source":"com.zetapush.tuto.upload|1.0.0:src/api.zms","params":[{"name":"anchor","constraints":[{"name":"RequestBody"},{"name":"type","config":{"type":"com.zetapush.tuto.upload.anchor"}}]}],"routes":["callbackreceipt"]},{"_type":"macro","description":" Macro dispatch","line":121,"steps":[],"name":"dispatch","channel":"dispatch","result":{"anchor":{"__ref":"${anchor}"}},"source":"com.zetapush.tuto.upload|1.0.0:src/api.zms","params":[{"name":"anchor","constraints":[{"name":"type","config":{"type":"com.zetapush.tuto.upload.anchor"}}]}],"broadcast":true},{"_type":"macro","description":" Macro updateStatus","line":1,"steps":[{"_type":"call","description":" Call api zpfs_hdfs.updateMeta","line":2,"deploymentId":"cr_fl_hdfs","verb":"updateMeta","parameter":{"path":{"__ref":"${path}"},"metadata":{"status":{"__ref":"${value}"}}},"resultName":"response"}],"name":"updateStatus","channel":"updateStatus","result":{"response":{"__ref":"${response}"}},"source":"com.zetapush.tuto.upload|1.0.0:src/updateStatus.zms","params":[{"name":"path","constraints":[{"name":"type","config":{"type":"string"}}]},{"name":"value","constraints":[{"name":"type","config":{"type":"string"}}]}]}],"functions":[{"_type":"MacroFunction","description":"Explode a string to an numeric indexed map","line":1,"steps":[{"_type":"var","description":" list =","line":5,"var":"list","value":{}},{"_type":"test","description":" if","line":6,"steps":[{"_type":"var","description":" length =","line":7,"var":"length","value":{"__ref":"${str:len(value)}"}},{"_type":"var","description":" iterations =","line":8,"var":"iterations","value":{"__ref":"${str:join('',math:round(math:floor((length / size))))}"}},{"_type":"var","description":" i =","line":9,"var":"i","value":1},{"_type":"var","description":" start =","line":10,"var":"start","value":0},{"_type":"var","description":" rest =","line":11,"var":"rest","value":{"__ref":"${(length - (i * size))}"}},{"_type":"var","description":" end =","line":12,"var":"end","value":{"__ref":"${((rest < 0) ? length : obj:sum(start, size))}"}},{"_type":"var","description":" split =","line":13,"var":"split","value":{"__ref":"${str:substr(value,start,end)}"}},{"_type":"loop","description":" while loop","line":14,"steps":[{"_type":"exec","description":" list +=","line":15,"exec":"${obj:modify(list,fmt:pad(i,str:len(iterations),0,'.'),split,__fnp_obj_add)}"},{"_type":"var","description":" i +=","line":16,"var":"i","value":{"__ref":"${obj:add(i,1)}"}},{"_type":"var","description":" start +=","line":17,"var":"start","value":{"__ref":"${obj:add(start,size)}"}},{"_type":"test","description":" if","line":18,"steps":[{"_type":"var","description":" split =","line":19,"var":"split","value":""}],"condition":"${(start >= length)}","otherwise":{"_type":"MacroBlock","steps":[{"_type":"var","description":" rest =","line":22,"var":"rest","value":{"__ref":"${(length - (i * size))}"}},{"_type":"var","description":" end =","line":23,"var":"end","value":{"__ref":"${((rest < 0) ? length : obj:sum(start, size))}"}},{"_type":"var","description":" split =","line":24,"var":"split","value":{"__ref":"${str:substr(value,start,end)}"}}]}}],"items":"${coll:test('${(str:len(split) > 0)}')}","var":"_sv9"}],"condition":"${(size > 0)}","otherwise":{"_type":"MacroBlock","steps":[{"_type":"exec","description":" list = ","line":28,"exec":"${obj:assign(list,'0',value)}"}]}}],"name":"explode","result":{"__ref":"${list}"},"parameters":[{"name":"value"},{"name":"size"}],"source":"com.zetapush.core.utils|2.0.0:src/api/utils/explode.zms"},{"_type":"MacroFunction","description":"","line":1,"steps":[{"_type":"var","description":" string =","line":5,"var":"string","value":{"__ref":"${obj:sum('', value)}"}},{"_type":"var","description":" size =","line":6,"var":"size","value":{"__ref":"${str:len(string)}"}},{"_type":"var","description":" pascalized =","line":7,"var":"pascalized","value":""},{"_type":"test","description":" if","line":8,"steps":[{"_type":"var","description":" pascalized =","line":9,"var":"pascalized","value":{"__ref":"${str:upper(string)}"}}],"condition":"${(size > 1)}","otherwise":{"_type":"MacroBlock","steps":[{"_type":"var","description":" pascalized =","line":11,"var":"pascalized","value":{"__ref":"${obj:sum(str:upper(str:substr(string,0,1)), str:substr(string,1,size))}"}}]}}],"name":"pascalize","result":{"__ref":"${str:rnd36(16)}"},"parameters":[{"name":"value"}],"source":"com.zetapush.core.utils|2.0.0:src/api/utils/string.zms"},{"_type":"MacroFunction","description":" Function formatPaginatedResult","line":171,"steps":[{"_type":"var","description":" originalPagination =","line":172,"var":"originalPagination","value":{"__ref":"${originalResult.page}"}}],"name":"formatPaginatedResult","result":{"content":{"__ref":"${originalResult.content}"},"page":{"pageNumber":{"__ref":"${originalPagination.pageNumber}"},"pageSize":{"__ref":"${originalPagination.pageSize}"},"direction":{"__ref":"${originalPagination.direction}"},"hasNext":{"__ref":"${hasNextPage}"}}},"parameters":[{"name":"originalResult"},{"name":"hasNextPage"}],"source":"com.zetapush.core.utils|2.0.0:src/api/utils/pagination.zms"},{"_type":"MacroFunction","description":" Function computePageForHasNext","line":183,"steps":[],"name":"computePageForHasNext","result":{"pageNumber":{"__ref":"${(obj:sum(originalPagination.pageNumber, 1) * originalPagination.pageSize)}"},"pageSize":1,"direction":{"__ref":"${originalPagination.direction}"}},"parameters":[{"name":"originalPagination"}],"source":"com.zetapush.core.utils|2.0.0:src/api/utils/pagination.zms"},{"_type":"MacroFunction","description":"Implode a list to a flat string","line":1,"steps":[{"_type":"var","description":" imploded =","line":5,"var":"imploded","value":""},{"_type":"loop","description":" For loop on variable entry","line":6,"steps":[{"_type":"var","description":" imploded +=","line":7,"var":"imploded","value":{"__ref":"${obj:add(imploded,entry.value)}"}}],"items":"${list}","var":"entry"}],"name":"implode","result":{"__ref":"${imploded}"},"parameters":[{"name":"list"}],"source":"com.zetapush.core.utils|2.0.0:src/api/utils/implode.zms"},{"_type":"MacroFunction","description":"Helper function: Hash a string with a given salt","line":1,"steps":[],"name":"hash","result":{"__ref":"${str:hex(str:md5(obj:sum(salt, value)))}"},"parameters":[{"name":"salt"},{"name":"value"}],"source":"com.zetapush.core.utils|2.0.0:src/api/utils/hash.zms"},{"_type":"MacroFunction","description":"Reduce an array to a map","line":1,"steps":[{"_type":"var","description":" index =","line":5,"var":"index","value":0},{"_type":"var","description":" map =","line":6,"var":"map","value":{}},{"_type":"var","description":" iterations =","line":7,"var":"iterations","value":{"__ref":"${coll:size(array)}"}},{"_type":"var","description":" digits =","line":8,"var":"digits","value":{"__ref":"${str:len(obj:sum('', iterations))}"}},{"_type":"loop","description":" For loop on variable item","line":9,"steps":[{"_type":"var","description":" key =","line":10,"var":"key","value":{"__ref":"${fmt:pad(index,digits,0,'.')}"}},{"_type":"exec","description":" map = ","line":11,"exec":"${obj:assign(map,key,item)}"},{"_type":"var","description":" index +=","line":12,"var":"index","value":{"__ref":"${obj:add(index,1)}"}}],"items":"${array}","var":"item"}],"name":"reduce_array_to_map","result":{"__ref":"${map}"},"parameters":[{"name":"array"}],"source":"com.zetapush.core.utils|2.0.0:src/api/utils/reduce.zms"},{"_type":"MacroFunction","description":"Reduce a map to an array","line":16,"steps":[{"_type":"var","description":" index =","line":20,"var":"index","value":0},{"_type":"var","description":" array =","line":21,"var":"array","value":[]},{"_type":"loop","description":" For loop on variable item","line":22,"steps":[{"_type":"var","description":" array +=","line":23,"var":"array","value":{"__ref":"${obj:add(array,item.value)}"}}],"items":"${map}","var":"item"}],"name":"reduce_map_to_array","result":{"__ref":"${array}"},"parameters":[{"name":"map"}],"source":"com.zetapush.core.utils|2.0.0:src/api/utils/reduce.zms"},{"_type":"MacroFunction","description":"Reduce an array to and hash","line":27,"steps":[{"_type":"lf","var":"_sfc1","f":{"_type":"MacroFunction","result":{"__ref":"${((a < b) ? -1 : ((a > b) ? 1 : 0))}"},"parameters":[{"name":"a"},{"name":"b"}]}},{"_type":"var","description":" sorted =","line":31,"var":"sorted","value":{"__ref":"${coll:sort(array,_sfc1)}"}}],"name":"reduce_array_to_hash","result":{"__ref":"${usr:hash('hash',salt,str:join('',sorted))}"},"parameters":[{"name":"array"},{"name":"salt"}],"source":"com.zetapush.core.utils|2.0.0:src/api/utils/reduce.zms"},{"_type":"MacroFunction","description":"Generate a unique id","line":1,"steps":[],"name":"uuid","result":{"__ref":"${str:rnd36(16)}"},"parameters":[],"source":"com.zetapush.core.utils|2.0.0:src/api/utils/uuid.zms"},{"_type":"MacroFunction","description":"Map a native api object to user object","line":1,"steps":[],"name":"map_entry_key_value","result":{"key":{"__ref":"${entry.key}"},"value":{"__ref":"${entry.value}"}},"parameters":[{"name":"entry"}],"source":"com.zetapush.core.utils|2.0.0:src/api/utils/map.zms"}],"types":[{"name":"com.zetapush.tuto.upload.target_proof","fields":[{"name":"left","constraints":[{"name":"type","config":{"type":"string"}}]},{"name":"parent","constraints":[{"name":"type","config":{"type":"string"}}]},{"name":"right","constraints":[{"name":"type","config":{"type":"string"}}]}]},{"name":"com.zetapush.tuto.upload.anchor","fields":[{"name":"id","constraints":[{"name":"type","config":{"type":"string"}}]},{"name":"created","constraints":[{"name":"type","config":{"type":"number"}}]},{"name":"lastModified","constraints":[{"name":"type","config":{"type":"number"}}]},{"name":"name","constraints":[{"name":"type","config":{"type":"string"}}]},{"name":"hash","constraints":[{"name":"type","config":{"type":"string"}}]},{"name":"signedHash","constraints":[{"name":"type","config":{"type":"string"}}]},{"name":"pubKey","constraints":[{"name":"type","config":{"type":"string"}}]},{"name":"signature","constraints":[{"name":"type","config":{"type":"string"}}]},{"name":"identityURL","constraints":[{"name":"type","config":{"type":"string"}}]},{"name":"public_","constraints":[{"name":"type","config":{"type":"boolean"}}]},{"name":"tags","constraints":[{"name":"type","config":{"type":"string","array":true}}]},{"name":"metadata","constraints":[{"name":"type","config":{"type":"map"}}]},{"name":"callbackURL","constraints":[{"name":"type","config":{"type":"string"}}]},{"name":"status","constraints":[{"name":"type","config":{"type":"string"}}]},{"name":"timestamp","constraints":[{"name":"type","config":{"type":"number"}}]},{"name":"confirmations","constraints":[{"name":"type","config":{"type":"number"}}]},{"name":"txId","constraints":[{"name":"type","config":{"type":"string"}}]}]},{"name":"com.zetapush.tuto.upload.signature","fields":[{"name":"signedHash","constraints":[{"name":"type","config":{"type":"string"}}]},{"name":"pubKey","constraints":[{"name":"type","config":{"type":"string"}}]},{"name":"signature","constraints":[{"name":"type","config":{"type":"string"}}]},{"name":"identityURL","constraints":[{"name":"type","config":{"type":"string"}}]}]},{"name":"com.zetapush.tuto.upload.receipt","fields":[{"name":"header","constraints":[{"name":"type","config":{"type":"com.zetapush.tuto.upload.header"}}]},{"name":"target","constraints":[{"name":"type","config":{"type":"com.zetapush.tuto.upload.target"}}]},{"name":"signature","constraints":[{"name":"type","config":{"type":"com.zetapush.tuto.upload.signature"}}]},{"name":"extra","constraints":[{"name":"type","config":{"type":"map"}}]}]},{"name":"com.zetapush.tuto.upload.header","fields":[{"name":"chainpoint_version","constraints":[{"name":"type","config":{"type":"string"}}]},{"name":"hash_type","constraints":[{"name":"type","config":{"type":"string"}}]},{"name":"merkle_root","constraints":[{"name":"type","config":{"type":"string"}}]},{"name":"tx_id","constraints":[{"name":"type","config":{"type":"string"}}]},{"name":"timestamp","constraints":[{"name":"type","config":{"type":"number"}}]}]},{"name":"com.zetapush.tuto.upload.target","fields":[{"name":"target_hash","constraints":[{"name":"type","config":{"type":"string"}}]},{"name":"target_proof","constraints":[{"name":"type","config":{"type":"com.zetapush.tuto.upload.target_proof"}}]}]}],"globals":{},"purge":true}